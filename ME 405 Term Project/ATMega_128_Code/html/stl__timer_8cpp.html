<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Polar Plotter Project: stl_timer.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Polar Plotter Project
   &#160;<span id="projectnumber">5.0</span>
   </div>
   <div id="projectbrief">A 2D Polar Plotter for Drawing Straight Lines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('stl__timer_8cpp.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">stl_timer.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;avr/interrupt.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="base__text__serial_8h_source.html">base_text_serial.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="stl__timer_8h_source.html">stl_timer.h</a>&quot;</code><br/>
</div>
<p><a href="stl__timer_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a10a6dc794d0e6e4adfb80f4df7d84237"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stl__timer_8cpp.html#a10a6dc794d0e6e4adfb80f4df7d84237">operator&lt;&lt;</a> (<a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;serial, <a class="el" href="classtime__stamp.html">time_stamp</a> &amp;stamp)</td></tr>
<tr class="separator:a10a6dc794d0e6e4adfb80f4df7d84237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2300c044f16735e4616db33338b6c2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stl__timer_8cpp.html#ab2300c044f16735e4616db33338b6c2d">operator&lt;&lt;</a> (<a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;serial, <a class="el" href="classtask__timer.html">task_timer</a> &amp;tmr)</td></tr>
<tr class="separator:ab2300c044f16735e4616db33338b6c2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a998861a8ab343a7a4ba868634d12e6ef"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stl__timer_8cpp.html#a998861a8ab343a7a4ba868634d12e6ef">ISR</a> (<a class="el" href="stl__timer_8h.html#a4403e502e5a832f5cf455a8989320895">TMR_intr_vect</a>)</td></tr>
<tr class="separator:a998861a8ab343a7a4ba868634d12e6ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af042fc1d072e996e565d959db43ebcc6"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="stl__timer_8cpp.html#af042fc1d072e996e565d959db43ebcc6">ust_overflows</a> = 0</td></tr>
<tr class="separator:af042fc1d072e996e565d959db43ebcc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a class which runs a task timer whose resolution is one microsecond. The timer is used to help schedule the execution of tasks' run() functions. The functions can be run from a main loop by checking periodically if a task time has expired, or they can be called directly from the timer interrupt service routine in this file, or they can be called from some other hardware interrupt service routine; in the last case this file isn't involved.</p>
<p>Revisions: </p>
<ul>
<li>08-07-2007 JRR Created this file as daytimer.* with 1 second interrupts </li>
<li>08-08-2007 JRR Added event triggers </li>
<li>12-23-2007 JRR Made more general by allowing faster interrupt rates </li>
<li>01-05-2008 JRR Converted from time-of-day version to microsecond version </li>
<li>03-27-2008 JRR Added operators + and - for time stamps </li>
<li>03-31-2008 JRR Merged in stl_us_timer (int, long) and set_time (int, long) </li>
<li>05-15-2008 JRR Changed to use Timer 3 so Timer 1 can run motor PWM's </li>
<li>05-31-2008 JRR Changed time calculations to use CPU_FREQ_MHz from Makefile </li>
<li>01-04-2009 JRR Now uses CPU_FREQ_Hz (rather than MHz) for better precision </li>
<li>11-24-2009 JRR Changed CPU_FREQ_Hz to F_CPU to match AVR-LibC's name</li>
</ul>
<p>License: This file copyright 2007 by JR Ridgely. It is released under the Lesser GNU public license, version 2. </p>

<p>Definition in file <a class="el" href="stl__timer_8cpp_source.html">stl_timer.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a998861a8ab343a7a4ba868634d12e6ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stl__timer_8h.html#a4403e502e5a832f5cf455a8989320895">TMR_intr_vect</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the interrupt service routine which is called whenever there is a compare match on the 16-bit timer's counter. Nearly all AVR processors have a 16-bit timer called Timer 1, and this is the one we use here. </p>

<p>Definition at line <a class="el" href="stl__timer_8cpp_source.html#l00457">457</a> of file <a class="el" href="stl__timer_8cpp_source.html">stl_timer.cpp</a>.</p>

<p>References <a class="el" href="stl__timer_8cpp_source.html#l00044">ust_overflows</a>.</p>

</div>
</div>
<a class="anchor" id="a10a6dc794d0e6e4adfb80f4df7d84237"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbase__text__serial.html">base_text_serial</a>&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__stamp.html">time_stamp</a> &amp;&#160;</td>
          <td class="paramname"><em>stamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This overloaded operator allows a time stamp to be printed on a serial device such as a regular serial port or radio module in text mode. This allows lines to be set up in the style of 'cout.' The timestamp is always printed as a decimal number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>A reference to the serial-type object to which to print </td></tr>
    <tr><td class="paramname">stamp</td><td>A reference to the time stamp to be displayed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stl__timer_8cpp_source.html#l00413">413</a> of file <a class="el" href="stl__timer_8cpp_source.html">stl_timer.cpp</a>.</p>

<p>References <a class="el" href="stl__timer_8cpp_source.html#l00135">time_stamp::get_microsec()</a>, <a class="el" href="stl__timer_8cpp_source.html#l00123">time_stamp::get_seconds()</a>, and <a class="el" href="base__text__serial_8h_source.html#l00201">base_text_serial::putchar()</a>.</p>

</div>
</div>
<a class="anchor" id="ab2300c044f16735e4616db33338b6c2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classbase__text__serial.html">base_text_serial</a>&amp; operator&lt;&lt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classbase__text__serial.html">base_text_serial</a> &amp;&#160;</td>
          <td class="paramname"><em>serial</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtask__timer.html">task_timer</a> &amp;&#160;</td>
          <td class="paramname"><em>tmr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This overloaded operator allows the task timer to print the current time on a serial device such as a regular serial port or radio module in text mode. This allows lines to be set up in the style of 'cout.' The printing is done by the <a class="el" href="classtime__stamp.html">time_stamp</a> class; this method just calls the timer's get_time_now() method to get a time stamp, then has the time stamp print itself. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>A reference to the serial-type object to which to print </td></tr>
    <tr><td class="paramname">tmr</td><td>A reference to the timer whose time is to be displayed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="stl__timer_8cpp_source.html#l00444">444</a> of file <a class="el" href="stl__timer_8cpp_source.html">stl_timer.cpp</a>.</p>

<p>References <a class="el" href="stl__timer_8cpp_source.html#l00375">task_timer::get_time_now()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="af042fc1d072e996e565d959db43ebcc6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ust_overflows = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This variable holds the number of times the hardware timer has overflowed. This number is equivalent to the upper 16 bits of a 32-bit timer, and is so used. </p>

<p>Definition at line <a class="el" href="stl__timer_8cpp_source.html#l00044">44</a> of file <a class="el" href="stl__timer_8cpp_source.html">stl_timer.cpp</a>.</p>

<p>Referenced by <a class="el" href="stl__timer_8cpp_source.html#l00375">task_timer::get_time_now()</a>, <a class="el" href="stl__timer_8cpp_source.html#l00457">ISR()</a>, <a class="el" href="stl__timer_8cpp_source.html#l00359">task_timer::save_time_stamp()</a>, and <a class="el" href="stl__timer_8cpp_source.html#l00395">task_timer::set_time()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="stl__timer_8cpp.html">stl_timer.cpp</a></li>
    <li class="footer">Generated on Fri Sep 20 2013 14:27:59 for Polar Plotter Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
