<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Polar Plotter Project: sd_card.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Polar Plotter Project
   &#160;<span id="projectnumber">5.0</span>
   </div>
   <div id="projectbrief">A 2D Polar Plotter for Drawing Straight Lines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('sd__card_8cpp.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">sd_card.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="sd__card_8h_source.html">sd_card.h</a>&quot;</code><br/>
</div>
<p><a href="sd__card_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abd6503c70d862b979a3f7080a59e9acd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abd6503c70d862b979a3f7080a59e9acd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#abd6503c70d862b979a3f7080a59e9acd">STA_NOINIT</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:abd6503c70d862b979a3f7080a59e9acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drive not initialized code in DSTATUS. <br/></td></tr>
<tr class="separator:abd6503c70d862b979a3f7080a59e9acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec625080763d6cf487e550a6c9a2dd19"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec625080763d6cf487e550a6c9a2dd19"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aec625080763d6cf487e550a6c9a2dd19">STA_NODISK</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:aec625080763d6cf487e550a6c9a2dd19"><td class="mdescLeft">&#160;</td><td class="mdescRight">No medium in the drive code in DSTATUS. <br/></td></tr>
<tr class="separator:aec625080763d6cf487e550a6c9a2dd19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ec6dc5f6620a33fabe388d3a111ca8c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9ec6dc5f6620a33fabe388d3a111ca8c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a9ec6dc5f6620a33fabe388d3a111ca8c">STA_PROTECT</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:a9ec6dc5f6620a33fabe388d3a111ca8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write protected code in DSTATUS. <br/></td></tr>
<tr class="separator:a9ec6dc5f6620a33fabe388d3a111ca8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3c492f9aec325f0655941b75256f3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1b3c492f9aec325f0655941b75256f3c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a1b3c492f9aec325f0655941b75256f3c">CTRL_SYNC</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a1b3c492f9aec325f0655941b75256f3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sync command for write fns. in disk_ioctrl() <br/></td></tr>
<tr class="separator:a1b3c492f9aec325f0655941b75256f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a570216006f6a8fc4e1698b1bbb2d1dde"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a570216006f6a8fc4e1698b1bbb2d1dde"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a570216006f6a8fc4e1698b1bbb2d1dde">GET_SECTOR_COUNT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:a570216006f6a8fc4e1698b1bbb2d1dde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command used in f_mkfs() in disk_ioctrl() <br/></td></tr>
<tr class="separator:a570216006f6a8fc4e1698b1bbb2d1dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73b5cf2135cbd459d109b96c9aa346a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac73b5cf2135cbd459d109b96c9aa346a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ac73b5cf2135cbd459d109b96c9aa346a">GET_SECTOR_SIZE</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ac73b5cf2135cbd459d109b96c9aa346a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:ac73b5cf2135cbd459d109b96c9aa346a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec3bb4dfe075d0ba2f3b07b300a95500"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec3bb4dfe075d0ba2f3b07b300a95500"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aec3bb4dfe075d0ba2f3b07b300a95500">GET_BLOCK_SIZE</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:aec3bb4dfe075d0ba2f3b07b300a95500"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mandatory for only f_mkfs() in disk_ioctrl() <br/></td></tr>
<tr class="separator:aec3bb4dfe075d0ba2f3b07b300a95500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a345531a07462afbd999f414708e3b65b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a345531a07462afbd999f414708e3b65b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a345531a07462afbd999f414708e3b65b">CTRL_POWER</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a345531a07462afbd999f414708e3b65b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:a345531a07462afbd999f414708e3b65b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40e5cf3000553a978ff6e30dae70858"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af40e5cf3000553a978ff6e30dae70858"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#af40e5cf3000553a978ff6e30dae70858">CTRL_LOCK</a>&#160;&#160;&#160;5</td></tr>
<tr class="memdesc:af40e5cf3000553a978ff6e30dae70858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:af40e5cf3000553a978ff6e30dae70858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e40e16d2d7ce196858950f070b9ec03"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5e40e16d2d7ce196858950f070b9ec03"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a5e40e16d2d7ce196858950f070b9ec03">CTRL_EJECT</a>&#160;&#160;&#160;6</td></tr>
<tr class="memdesc:a5e40e16d2d7ce196858950f070b9ec03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:a5e40e16d2d7ce196858950f070b9ec03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba3a81a9a47c7d1bf3ac7749bc72dcfd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aba3a81a9a47c7d1bf3ac7749bc72dcfd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aba3a81a9a47c7d1bf3ac7749bc72dcfd">MMC_GET_TYPE</a>&#160;&#160;&#160;10</td></tr>
<tr class="memdesc:aba3a81a9a47c7d1bf3ac7749bc72dcfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:aba3a81a9a47c7d1bf3ac7749bc72dcfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3b858b81287929f7c7bea3b7aec3087"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae3b858b81287929f7c7bea3b7aec3087"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ae3b858b81287929f7c7bea3b7aec3087">MMC_GET_CSD</a>&#160;&#160;&#160;11</td></tr>
<tr class="memdesc:ae3b858b81287929f7c7bea3b7aec3087"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:ae3b858b81287929f7c7bea3b7aec3087"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ad303dd18b19a4c90ab30a8a1c14c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17ad303dd18b19a4c90ab30a8a1c14c4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a17ad303dd18b19a4c90ab30a8a1c14c4">MMC_GET_CID</a>&#160;&#160;&#160;12</td></tr>
<tr class="memdesc:a17ad303dd18b19a4c90ab30a8a1c14c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:a17ad303dd18b19a4c90ab30a8a1c14c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff118ba6bd7a9fe7699cee049cff5d6c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff118ba6bd7a9fe7699cee049cff5d6c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aff118ba6bd7a9fe7699cee049cff5d6c">MMC_GET_OCR</a>&#160;&#160;&#160;13</td></tr>
<tr class="memdesc:aff118ba6bd7a9fe7699cee049cff5d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:aff118ba6bd7a9fe7699cee049cff5d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc43c8449b872e16ea5ab42592f793e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5cc43c8449b872e16ea5ab42592f793e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a5cc43c8449b872e16ea5ab42592f793e">MMC_GET_SDSTAT</a>&#160;&#160;&#160;14</td></tr>
<tr class="memdesc:a5cc43c8449b872e16ea5ab42592f793e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command code in disk_ioctrl() <br/></td></tr>
<tr class="separator:a5cc43c8449b872e16ea5ab42592f793e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938c1466755f12fb04ac0d1b775584d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a938c1466755f12fb04ac0d1b775584d1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a938c1466755f12fb04ac0d1b775584d1">CMD0</a>&#160;&#160;&#160;(0x40+0)</td></tr>
<tr class="memdesc:a938c1466755f12fb04ac0d1b775584d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">GO_IDLE_STATE command for SD/MMC card. <br/></td></tr>
<tr class="separator:a938c1466755f12fb04ac0d1b775584d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca9979f299fa78c1128d778084478673"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aca9979f299fa78c1128d778084478673"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aca9979f299fa78c1128d778084478673">CMD1</a>&#160;&#160;&#160;(0x40+1)</td></tr>
<tr class="memdesc:aca9979f299fa78c1128d778084478673"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEND_OP_COND (MMC) command for SD/MMC card. <br/></td></tr>
<tr class="separator:aca9979f299fa78c1128d778084478673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b6fdfed1b57ac31269b6b9987e0761b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b6fdfed1b57ac31269b6b9987e0761b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a9b6fdfed1b57ac31269b6b9987e0761b">ACMD41</a>&#160;&#160;&#160;(0xC0+41)</td></tr>
<tr class="memdesc:a9b6fdfed1b57ac31269b6b9987e0761b"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEND_OP_COND (SDC) command for SD/MMC card. <br/></td></tr>
<tr class="separator:a9b6fdfed1b57ac31269b6b9987e0761b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac75b3e0ad1fb013ea946fb49bbe65668"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac75b3e0ad1fb013ea946fb49bbe65668"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ac75b3e0ad1fb013ea946fb49bbe65668">CMD8</a>&#160;&#160;&#160;(0x40+8)</td></tr>
<tr class="memdesc:ac75b3e0ad1fb013ea946fb49bbe65668"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEND_IF_COND command for SD/MMC card. <br/></td></tr>
<tr class="separator:ac75b3e0ad1fb013ea946fb49bbe65668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fac6a251d7e7dc204d21639bf521459"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1fac6a251d7e7dc204d21639bf521459"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a1fac6a251d7e7dc204d21639bf521459">CMD9</a>&#160;&#160;&#160;(0x40+9)</td></tr>
<tr class="memdesc:a1fac6a251d7e7dc204d21639bf521459"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEND_CSD command for SD/MMC card. <br/></td></tr>
<tr class="separator:a1fac6a251d7e7dc204d21639bf521459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7b800ed8e7bd52e6f570a5ce72b8104"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7b800ed8e7bd52e6f570a5ce72b8104"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ae7b800ed8e7bd52e6f570a5ce72b8104">CMD10</a>&#160;&#160;&#160;(0x40+10)</td></tr>
<tr class="memdesc:ae7b800ed8e7bd52e6f570a5ce72b8104"><td class="mdescLeft">&#160;</td><td class="mdescRight">SEND_CID command for SD/MMC card. <br/></td></tr>
<tr class="separator:ae7b800ed8e7bd52e6f570a5ce72b8104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d6283c9b060afbaa0e6d1ff7e5ea7b8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d6283c9b060afbaa0e6d1ff7e5ea7b8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a8d6283c9b060afbaa0e6d1ff7e5ea7b8">CMD12</a>&#160;&#160;&#160;(0x40+12)</td></tr>
<tr class="memdesc:a8d6283c9b060afbaa0e6d1ff7e5ea7b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">STOP_TRANSMISSION command for SD/MMC card. <br/></td></tr>
<tr class="separator:a8d6283c9b060afbaa0e6d1ff7e5ea7b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be8f501d86d24b02923846db618fc71"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4be8f501d86d24b02923846db618fc71"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a4be8f501d86d24b02923846db618fc71">ACMD13</a>&#160;&#160;&#160;(0xC0+13)</td></tr>
<tr class="memdesc:a4be8f501d86d24b02923846db618fc71"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD_STATUS (SDC) command for SD/MMC card. <br/></td></tr>
<tr class="separator:a4be8f501d86d24b02923846db618fc71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaeab261b94f2031ba41a1d4d857c3541"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaeab261b94f2031ba41a1d4d857c3541"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aaeab261b94f2031ba41a1d4d857c3541">CMD16</a>&#160;&#160;&#160;(0x40+16)</td></tr>
<tr class="memdesc:aaeab261b94f2031ba41a1d4d857c3541"><td class="mdescLeft">&#160;</td><td class="mdescRight">SET_BLOCKLEN command for SD/MMC card. <br/></td></tr>
<tr class="separator:aaeab261b94f2031ba41a1d4d857c3541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bbfe7dc16a19b7f40efcf554b5666ad"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6bbfe7dc16a19b7f40efcf554b5666ad"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a6bbfe7dc16a19b7f40efcf554b5666ad">CMD17</a>&#160;&#160;&#160;(0x40+17)</td></tr>
<tr class="memdesc:a6bbfe7dc16a19b7f40efcf554b5666ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">READ_SINGLE_BLOCK command for SD/MMC card. <br/></td></tr>
<tr class="separator:a6bbfe7dc16a19b7f40efcf554b5666ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d32c27a6be061b865ba539127278f14"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d32c27a6be061b865ba539127278f14"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a3d32c27a6be061b865ba539127278f14">CMD18</a>&#160;&#160;&#160;(0x40+18)</td></tr>
<tr class="memdesc:a3d32c27a6be061b865ba539127278f14"><td class="mdescLeft">&#160;</td><td class="mdescRight">READ_MULTIPLE_BLOCK command for SD/MMC card. <br/></td></tr>
<tr class="separator:a3d32c27a6be061b865ba539127278f14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14506e981f38b6177bc36f72c2ca18b1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a14506e981f38b6177bc36f72c2ca18b1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a14506e981f38b6177bc36f72c2ca18b1">CMD23</a>&#160;&#160;&#160;(0x40+23)</td></tr>
<tr class="memdesc:a14506e981f38b6177bc36f72c2ca18b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SET_BLOCK_COUNT (MMC) command for SD/MMC card. <br/></td></tr>
<tr class="separator:a14506e981f38b6177bc36f72c2ca18b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa38144d651e2880f92c65bb683621f78"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa38144d651e2880f92c65bb683621f78"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aa38144d651e2880f92c65bb683621f78">ACMD23</a>&#160;&#160;&#160;(0xC0+23)</td></tr>
<tr class="memdesc:aa38144d651e2880f92c65bb683621f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">SET_WR_BLK_ERASE_COUNT (SDC) command for card. <br/></td></tr>
<tr class="separator:aa38144d651e2880f92c65bb683621f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a252300302c6f7960df547a7f5c25be85"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a252300302c6f7960df547a7f5c25be85"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a252300302c6f7960df547a7f5c25be85">CMD24</a>&#160;&#160;&#160;(0x40+24)</td></tr>
<tr class="memdesc:a252300302c6f7960df547a7f5c25be85"><td class="mdescLeft">&#160;</td><td class="mdescRight">WRITE_BLOCK command for SD/MMC card. <br/></td></tr>
<tr class="separator:a252300302c6f7960df547a7f5c25be85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2c673fba987178f4642531fdeefe9e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aee2c673fba987178f4642531fdeefe9e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aee2c673fba987178f4642531fdeefe9e">CMD25</a>&#160;&#160;&#160;(0x40+25)</td></tr>
<tr class="memdesc:aee2c673fba987178f4642531fdeefe9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">WRITE_MULTIPLE_BLOCK command for SD/MMC card. <br/></td></tr>
<tr class="separator:aee2c673fba987178f4642531fdeefe9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78289a7a85ffcfddd626694105dc0780"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a78289a7a85ffcfddd626694105dc0780"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a78289a7a85ffcfddd626694105dc0780">CMD55</a>&#160;&#160;&#160;(0x40+55)</td></tr>
<tr class="memdesc:a78289a7a85ffcfddd626694105dc0780"><td class="mdescLeft">&#160;</td><td class="mdescRight">APP_CMD command for SD/MMC card. <br/></td></tr>
<tr class="separator:a78289a7a85ffcfddd626694105dc0780"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7a26b2cf17e1ff5967820a1fa41a7aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa7a26b2cf17e1ff5967820a1fa41a7aa"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#aa7a26b2cf17e1ff5967820a1fa41a7aa">CMD58</a>&#160;&#160;&#160;(0x40+58)</td></tr>
<tr class="memdesc:aa7a26b2cf17e1ff5967820a1fa41a7aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">READ_OCR command for SD/MMC card. <br/></td></tr>
<tr class="separator:aa7a26b2cf17e1ff5967820a1fa41a7aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac52ec66c278308382fdf7b2c57f0ad8c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac52ec66c278308382fdf7b2c57f0ad8c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ac52ec66c278308382fdf7b2c57f0ad8c">CT_MMC</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="memdesc:ac52ec66c278308382fdf7b2c57f0ad8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">MMC ver 3 card type flag. <br/></td></tr>
<tr class="separator:ac52ec66c278308382fdf7b2c57f0ad8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c9fc863ec15d3320b3850dc571626e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad1c9fc863ec15d3320b3850dc571626e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ad1c9fc863ec15d3320b3850dc571626e">CT_SD1</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="memdesc:ad1c9fc863ec15d3320b3850dc571626e"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD ver 1 card type flag. <br/></td></tr>
<tr class="separator:ad1c9fc863ec15d3320b3850dc571626e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0db1b71113e73184a5ba511e7020a922"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0db1b71113e73184a5ba511e7020a922"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a0db1b71113e73184a5ba511e7020a922">CT_SD2</a>&#160;&#160;&#160;0x04</td></tr>
<tr class="memdesc:a0db1b71113e73184a5ba511e7020a922"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD ver 2 card type flag. <br/></td></tr>
<tr class="separator:a0db1b71113e73184a5ba511e7020a922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae76d94ac83c68d1f025cb0bcad77fa5d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae76d94ac83c68d1f025cb0bcad77fa5d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ae76d94ac83c68d1f025cb0bcad77fa5d">CT_SDC</a>&#160;&#160;&#160;(<a class="el" href="sd__card_8cpp.html#ad1c9fc863ec15d3320b3850dc571626e">CT_SD1</a>|<a class="el" href="sd__card_8cpp.html#a0db1b71113e73184a5ba511e7020a922">CT_SD2</a>)</td></tr>
<tr class="memdesc:ae76d94ac83c68d1f025cb0bcad77fa5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SD card type flag. <br/></td></tr>
<tr class="separator:ae76d94ac83c68d1f025cb0bcad77fa5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d48ce54c27f4f60666309e8627fab47"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d48ce54c27f4f60666309e8627fab47"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a7d48ce54c27f4f60666309e8627fab47">CT_BLOCK</a>&#160;&#160;&#160;0x08</td></tr>
<tr class="memdesc:a7d48ce54c27f4f60666309e8627fab47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Block addressing card type flag. <br/></td></tr>
<tr class="separator:a7d48ce54c27f4f60666309e8627fab47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56e8d2ffde94d0c5fdf14b772a32a77f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a56e8d2ffde94d0c5fdf14b772a32a77f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a56e8d2ffde94d0c5fdf14b772a32a77f">SELECT</a>()&#160;&#160;&#160;<a class="el" href="sd__card_8h.html#a5f934a7642239adfef3e9607d3ad16bc">SD_CS_PORT</a> &amp;= ~<a class="el" href="sd__card_8h.html#a62b196d625ae221c1a83217c98b6fe25">SD_CS_MASK</a></td></tr>
<tr class="memdesc:a56e8d2ffde94d0c5fdf14b772a32a77f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro causes the SD card to be selected by lowering its chip select bit. <br/></td></tr>
<tr class="separator:a56e8d2ffde94d0c5fdf14b772a32a77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbd972fc333e07d29999e284020c362"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1cbd972fc333e07d29999e284020c362"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a1cbd972fc333e07d29999e284020c362">DESELECT</a>()&#160;&#160;&#160;<a class="el" href="sd__card_8h.html#a5f934a7642239adfef3e9607d3ad16bc">SD_CS_PORT</a> |= <a class="el" href="sd__card_8h.html#a62b196d625ae221c1a83217c98b6fe25">SD_CS_MASK</a></td></tr>
<tr class="memdesc:a1cbd972fc333e07d29999e284020c362"><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro causes the SD card to be deselected by raising its chip select bit. <br/></td></tr>
<tr class="separator:a1cbd972fc333e07d29999e284020c362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a664c3d000760b8eddac30e40456f0643"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a664c3d000760b8eddac30e40456f0643">MM_power_on</a>()</td></tr>
<tr class="separator:a664c3d000760b8eddac30e40456f0643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a291fa48839d766ae9b979458aa62d04f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a291fa48839d766ae9b979458aa62d04f">MM_power_off</a>()</td></tr>
<tr class="separator:a291fa48839d766ae9b979458aa62d04f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3d9176798d1718d779e2db397de4bb5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#ae3d9176798d1718d779e2db397de4bb5">FCLK_SLOW</a>()</td></tr>
<tr class="separator:ae3d9176798d1718d779e2db397de4bb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ffcdd6f111fd9b4229f49a5e37046b7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a1ffcdd6f111fd9b4229f49a5e37046b7">FCLK_FAST</a>()</td></tr>
<tr class="separator:a1ffcdd6f111fd9b4229f49a5e37046b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a495d5bdb434b115bf1cb36ee55cb9ef2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a495d5bdb434b115bf1cb36ee55cb9ef2">MM_xmit_spi</a>(dat)&#160;&#160;&#160;SPDR = (dat); loop_until_bit_is_set (SPSR, SPIF)</td></tr>
<tr class="separator:a495d5bdb434b115bf1cb36ee55cb9ef2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7c0d1b3329756cd82a0b233fbf0d36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a5a7c0d1b3329756cd82a0b233fbf0d36">MM_rcvr_spi_m</a>(dst)</td></tr>
<tr class="separator:a5a7c0d1b3329756cd82a0b233fbf0d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:adba6790898ce4029c20a34b898ce73c1"><td class="memItemLeft" align="right" valign="top">typedef BYTE&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#adba6790898ce4029c20a34b898ce73c1">DSTATUS</a></td></tr>
<tr class="separator:adba6790898ce4029c20a34b898ce73c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af94ed294ea10bac97a92806b1d589858"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sd__card_8cpp.html#adba6790898ce4029c20a34b898ce73c1">DSTATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#af94ed294ea10bac97a92806b1d589858">disk_initialize</a> (BYTE drive_number)</td></tr>
<tr class="separator:af94ed294ea10bac97a92806b1d589858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21ad8e9a107ea2000705a3edfebaaa2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sd__card_8cpp.html#adba6790898ce4029c20a34b898ce73c1">DSTATUS</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a21ad8e9a107ea2000705a3edfebaaa2d">disk_status</a> (BYTE drv)</td></tr>
<tr class="separator:a21ad8e9a107ea2000705a3edfebaaa2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a916840298eb6e4b7ab481b1ffe8b7416"><td class="memItemLeft" align="right" valign="top">DRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a916840298eb6e4b7ab481b1ffe8b7416">disk_read</a> (BYTE drive_number, BYTE *buff, DWORD sector, BYTE count)</td></tr>
<tr class="separator:a916840298eb6e4b7ab481b1ffe8b7416"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc184f9ce9e43f409579dbe25c6ae12e"><td class="memItemLeft" align="right" valign="top">DRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#adc184f9ce9e43f409579dbe25c6ae12e">disk_write</a> (BYTE drive_number, const BYTE *buff, DWORD sector, BYTE count)</td></tr>
<tr class="separator:adc184f9ce9e43f409579dbe25c6ae12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90b9b7773d9f969990f80bcae9da400c"><td class="memItemLeft" align="right" valign="top">DRESULT&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#a90b9b7773d9f969990f80bcae9da400c">disk_ioctl</a> (BYTE drive_number, BYTE ctrl, void *buff)</td></tr>
<tr class="separator:a90b9b7773d9f969990f80bcae9da400c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af58b536abfd30f77213f4ecaf2ac52f5"><td class="memItemLeft" align="right" valign="top">DWORD&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="sd__card_8cpp.html#af58b536abfd30f77213f4ecaf2ac52f5">get_fattime</a> (void)</td></tr>
<tr class="separator:af58b536abfd30f77213f4ecaf2ac52f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains a class which allows SD cards to be read and written. The intent is that SD cards can be convenient mechanisms for the storage of lots and lots of data. In fact, the <a class="el" href="classbase__text__serial.html">base_text_serial</a> class is used as an ancestor, so the SD card can be used to write data as text using "&lt;&lt;" operators.</p>
<p>This version of the <a class="el" href="classsd__card.html">sd_card</a> driver is based on ELM-FAT-FS, a package of DOS file system drivers found at <a href="http://elm-chan.org/fsw/ff/00index_e.html">http://elm-chan.org/fsw/ff/00index_e.html</a>. It was chosen because it is open source and is currently being maintained, while some other packages are in a more static state, their authors having presumably moved on.</p>
<p>Revisions: </p>
<ul>
<li>06-09-2008 JRR Class created, based on C program example found at <a href="http://www.captain.at/electronic-atmega-mmc.php">http://www.captain.at/electronic-atmega-mmc.php</a> </li>
<li>08-17-2008 JRR Actually found the time to get it working </li>
<li>12-09-2008 JRR Added FAT16 filesystem support using DOSFS package from <a href="http://www.larwe.com/zws/products/dosfs/index.html">http://www.larwe.com/zws/products/dosfs/index.html</a> </li>
<li>02-26-2009 JRR Found time to fix lots of bugs in DOSFS version </li>
<li>11-21-2009 JRR The DOSFS code is still buggy; trying ELM-FAT-FS version from <a href="http://elm-chan.org/fsw/ff/00index_e.html">http://elm-chan.org/fsw/ff/00index_e.html</a> </li>
<li>12-16-2009 JRR The ELM-FAT-FS version seems reasonably debugged and usable</li>
</ul>
<p>License: This file is free software released under the Lesser GNU Public License, version</p>
<ol type="1">
<li>This program is intended for educational use only, but it is not limited thereto. It is provided without any guarantee whatsoever. Because the author has no control over how this software may be used, the author cannot be responsible for any consequences of the use of this software. The ELM-FAT-FS package on which this program relies is subject to its own free software license, and any user of this software must agree to the terms of that license as well as the LGPL. See the ELM-FAT-FS link above for details about the license governing DOSFS use. </li>
</ol>

<p>Definition in file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a1ffcdd6f111fd9b4229f49a5e37046b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FCLK_FAST</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro is defined to set a fast SPI clock speed, but it does nothing because it's not actually needed. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00112">112</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>Referenced by <a class="el" href="sd__card_8cpp_source.html#l00335">disk_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="ae3d9176798d1718d779e2db397de4bb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FCLK_SLOW</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro is defined to set a slow SPI clock speed, but it does nothing because it's not actually needed. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00107">107</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>Referenced by <a class="el" href="sd__card_8cpp_source.html#l00335">disk_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a291fa48839d766ae9b979458aa62d04f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MM_power_off</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro is specified to turn SD card power off, but it does nothing because the SD card in the current design has no socket power control. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00102">102</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>Referenced by <a class="el" href="sd__card_8cpp_source.html#l00335">disk_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a664c3d000760b8eddac30e40456f0643"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MM_power_on</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro is specified to turn SD card power on, but it does nothing because the SD card in the current design has no socket power control. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00097">97</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>Referenced by <a class="el" href="sd__card_8cpp_source.html#l00335">disk_initialize()</a>.</p>

</div>
</div>
<a class="anchor" id="a5a7c0d1b3329756cd82a0b233fbf0d36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MM_rcvr_spi_m</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dst</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">SPDR = 0xFF; \</div>
<div class="line">                            loop_until_bit_is_set (SPSR, SPIF); \</div>
<div class="line">                            *(dst) = SPDR</div>
</div><!-- fragment --><p>This macro receives a byte through the SPI interface. It is intended to be a bit faster than calling the MM_rcvr_spi() function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>A pointer to a byte in which to store the received data </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00156">156</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a495d5bdb434b115bf1cb36ee55cb9ef2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MM_xmit_spi</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dat</td><td>)</td>
          <td>&#160;&#160;&#160;SPDR = (dat); loop_until_bit_is_set (SPSR, SPIF)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This macro transmits a byte to the SD card via the SPI interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dat</td><td>The data byte to be transmitted </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00131">131</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="adba6790898ce4029c20a34b898ce73c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef BYTE DSTATUS</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This typedef defines a status byte which holds information about the state of a drive. If it's 0, the drive is working and ready for use; when one or more bits are 1, different exception conditions defined as STA_xxx are indicated. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00044">44</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="af94ed294ea10bac97a92806b1d589858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sd__card_8cpp.html#adba6790898ce4029c20a34b898ce73c1">DSTATUS</a> disk_initialize </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>drive_number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initializes the SD card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drive_number</td><td>The drive number; this function works with one SD card only, so the drive number is ignored </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00335">335</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>References <a class="el" href="sd__card_8cpp_source.html#l00065">ACMD41</a>, <a class="el" href="sd__card_8cpp_source.html#l00063">CMD0</a>, <a class="el" href="sd__card_8cpp_source.html#l00064">CMD1</a>, <a class="el" href="sd__card_8cpp_source.html#l00071">CMD16</a>, <a class="el" href="sd__card_8cpp_source.html#l00079">CMD58</a>, <a class="el" href="sd__card_8cpp_source.html#l00066">CMD8</a>, <a class="el" href="sd__card_8cpp_source.html#l00085">CT_BLOCK</a>, <a class="el" href="sd__card_8cpp_source.html#l00081">CT_MMC</a>, <a class="el" href="sd__card_8cpp_source.html#l00082">CT_SD1</a>, <a class="el" href="sd__card_8cpp_source.html#l00083">CT_SD2</a>, <a class="el" href="sd__card_8cpp_source.html#l00092">DESELECT</a>, <a class="el" href="sd__card_8cpp_source.html#l00112">FCLK_FAST</a>, <a class="el" href="sd__card_8cpp_source.html#l00107">FCLK_SLOW</a>, <a class="el" href="sd__card_8cpp_source.html#l00102">MM_power_off</a>, <a class="el" href="sd__card_8cpp_source.html#l00097">MM_power_on</a>, and <a class="el" href="sd__card_8cpp_source.html#l00046">STA_NOINIT</a>.</p>

<p>Referenced by <a class="el" href="sd__card_8cpp_source.html#l00805">sd_card::mount()</a>.</p>

</div>
</div>
<a class="anchor" id="a90b9b7773d9f969990f80bcae9da400c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DRESULT disk_ioctl </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>drive_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>ctrl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buff</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to carry out various miscellaneous I/O functions with the SD card. The functions which are supported are the following: </p>
<ul>
<li>CTRL_SYNC - Ensure that any pending write process has finished </li>
<li>GET_SECTOR_COUNT - Get the number of sectors on the disk </li>
<li>GET_SECTOR_SIZE - Get the sector size </li>
<li>GET_BLOCK_SIZE - Get the block size (should always be 512 for SD cards) </li>
<li>MMC_GET_CSD - </li>
<li>MMC_GET_CID - </li>
<li>MMC_GET_OCR - </li>
<li>MMC_GET_SDSTAT -</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drive_number</td><td>The drive number; this function works with one SD card only, so the drive number is ignored </td></tr>
    <tr><td class="paramname">ctrl</td><td>The control code which tells which function is called for </td></tr>
    <tr><td class="paramname">buff</td><td>A pointer to a buffer used for sector I/O to and from the disk </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00535">535</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>References <a class="el" href="sd__card_8cpp_source.html#l00070">ACMD13</a>, <a class="el" href="sd__card_8cpp_source.html#l00068">CMD10</a>, <a class="el" href="sd__card_8cpp_source.html#l00079">CMD58</a>, <a class="el" href="sd__card_8cpp_source.html#l00067">CMD9</a>, <a class="el" href="sd__card_8cpp_source.html#l00082">CT_SD1</a>, <a class="el" href="sd__card_8cpp_source.html#l00083">CT_SD2</a>, <a class="el" href="sd__card_8cpp_source.html#l00050">CTRL_SYNC</a>, <a class="el" href="sd__card_8cpp_source.html#l00053">GET_BLOCK_SIZE</a>, <a class="el" href="sd__card_8cpp_source.html#l00051">GET_SECTOR_COUNT</a>, <a class="el" href="sd__card_8cpp_source.html#l00052">GET_SECTOR_SIZE</a>, <a class="el" href="sd__card_8cpp_source.html#l00059">MMC_GET_CID</a>, <a class="el" href="sd__card_8cpp_source.html#l00058">MMC_GET_CSD</a>, <a class="el" href="sd__card_8cpp_source.html#l00060">MMC_GET_OCR</a>, <a class="el" href="sd__card_8cpp_source.html#l00061">MMC_GET_SDSTAT</a>, <a class="el" href="sd__card_8cpp_source.html#l00089">SELECT</a>, and <a class="el" href="sd__card_8cpp_source.html#l00046">STA_NOINIT</a>.</p>

</div>
</div>
<a class="anchor" id="a916840298eb6e4b7ab481b1ffe8b7416"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DRESULT disk_read </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>drive_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function reads one or more sector(s) from the SD card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drive_number</td><td>The drive number; this function works with one SD card only, so the drive number is ignored </td></tr>
    <tr><td class="paramname">buff</td><td>A pointer to the data buffer to store read data </td></tr>
    <tr><td class="paramname">sector</td><td>Starting sector number (LBA) </td></tr>
    <tr><td class="paramname">count</td><td>The sector count (1..255) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00437">437</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>References <a class="el" href="sd__card_8cpp_source.html#l00069">CMD12</a>, <a class="el" href="sd__card_8cpp_source.html#l00072">CMD17</a>, <a class="el" href="sd__card_8cpp_source.html#l00073">CMD18</a>, <a class="el" href="sd__card_8cpp_source.html#l00085">CT_BLOCK</a>, and <a class="el" href="sd__card_8cpp_source.html#l00046">STA_NOINIT</a>.</p>

</div>
</div>
<a class="anchor" id="a21ad8e9a107ea2000705a3edfebaaa2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sd__card_8cpp.html#adba6790898ce4029c20a34b898ce73c1">DSTATUS</a> disk_status </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>drv</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function returns the status of a given physical drive. The status is held in a byte of type DSTATUS which holds bits that indicate drive not initialized and other exception conditions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drv</td><td>The physical drive number. Since this implementation uses only one drive, this parameter is ignored. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00419">419</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="adc184f9ce9e43f409579dbe25c6ae12e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DRESULT disk_write </td>
          <td>(</td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>drive_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const BYTE *&#160;</td>
          <td class="paramname"><em>buff</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DWORD&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BYTE&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function writes one or more sector(s) to the SD card. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">drive_number</td><td>The drive number; this function works with one SD card only, so the drive number is ignored </td></tr>
    <tr><td class="paramname">buff</td><td>A pointer to the buffer holding the data to be written </td></tr>
    <tr><td class="paramname">sector</td><td>Starting sector number (LBA) </td></tr>
    <tr><td class="paramname">count</td><td>The sector count (1..255) </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00476">476</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

<p>References <a class="el" href="sd__card_8cpp_source.html#l00074">CMD23</a>, <a class="el" href="sd__card_8cpp_source.html#l00076">CMD24</a>, <a class="el" href="sd__card_8cpp_source.html#l00077">CMD25</a>, <a class="el" href="sd__card_8cpp_source.html#l00078">CMD55</a>, <a class="el" href="sd__card_8cpp_source.html#l00085">CT_BLOCK</a>, <a class="el" href="sd__card_8cpp_source.html#l00084">CT_SDC</a>, <a class="el" href="sd__card_8cpp_source.html#l00046">STA_NOINIT</a>, and <a class="el" href="sd__card_8cpp_source.html#l00048">STA_PROTECT</a>.</p>

</div>
</div>
<a class="anchor" id="af58b536abfd30f77213f4ecaf2ac52f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DWORD get_fattime </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is a real time clock service to be called from the FatFs module. Any valid time must be returned even if the system does not support a real time clock. This is not required in read-only configuration. </p>

<p>Definition at line <a class="el" href="sd__card_8cpp_source.html#l00668">668</a> of file <a class="el" href="sd__card_8cpp_source.html">sd_card.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="sd__card_8cpp.html">sd_card.cpp</a></li>
    <li class="footer">Generated on Fri Sep 20 2013 14:27:59 for Polar Plotter Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
