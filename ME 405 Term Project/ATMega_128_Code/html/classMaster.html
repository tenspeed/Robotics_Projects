<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Polar Plotter Project: Master Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Polar Plotter Project
   &#160;<span id="projectnumber">5.0</span>
   </div>
   <div id="projectbrief">A 2D Polar Plotter for Drawing Straight Lines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classMaster.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classMaster-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Master Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Master_8h_source.html">Master.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionMaster_1_1packet1.html">packet1</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">encoder_data allows easy partitioning of encoder data  <a href="unionMaster_1_1packet1.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a39589d526331f8b5abf9d405a5ea7fe7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a39589d526331f8b5abf9d405a5ea7fe7">Master</a> (base_text_serial *)</td></tr>
<tr class="separator:a39589d526331f8b5abf9d405a5ea7fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad85c13cad19e5600c6d2dff28aaa0a52"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#ad85c13cad19e5600c6d2dff28aaa0a52">CLEAR</a> (uint8_t)</td></tr>
<tr class="separator:ad85c13cad19e5600c6d2dff28aaa0a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af507aba60a24105be4b58a441780fa28"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#af507aba60a24105be4b58a441780fa28">Initiate</a> (uint8_t)</td></tr>
<tr class="separator:af507aba60a24105be4b58a441780fa28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5baf3043c5c903472a906cd29643725"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#af5baf3043c5c903472a906cd29643725">Get_Checksum_flag</a> (void)</td></tr>
<tr class="separator:af5baf3043c5c903472a906cd29643725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93f188774888e736f1bcb3345e6f208"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#ac93f188774888e736f1bcb3345e6f208">Get_Checksum_Error</a> (void)</td></tr>
<tr class="separator:ac93f188774888e736f1bcb3345e6f208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6036259c4c2c8f4f3a11fd36ae23a6b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#ac6036259c4c2c8f4f3a11fd36ae23a6b">Get_Encoder</a> (void)</td></tr>
<tr class="separator:ac6036259c4c2c8f4f3a11fd36ae23a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a826ae7a92e5910b4bf275a128a5aafc0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a826ae7a92e5910b4bf275a128a5aafc0"></a>
base_text_serial *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a826ae7a92e5910b4bf275a128a5aafc0">ptr_to_serial</a></td></tr>
<tr class="memdesc:a826ae7a92e5910b4bf275a128a5aafc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The encoder driver class needs a pointer to the serial port used to output to the terminal. <br/></td></tr>
<tr class="separator:a826ae7a92e5910b4bf275a128a5aafc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c51d672c465103b0e3a85ff5ae68d79"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4c51d672c465103b0e3a85ff5ae68d79"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a4c51d672c465103b0e3a85ff5ae68d79">error_flag</a></td></tr>
<tr class="memdesc:a4c51d672c465103b0e3a85ff5ae68d79"><td class="mdescLeft">&#160;</td><td class="mdescRight">flag indicating transfer error on encoder 1 <br/></td></tr>
<tr class="separator:a4c51d672c465103b0e3a85ff5ae68d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3183754384c4bfd6a920c82e5e3b1618"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3183754384c4bfd6a920c82e5e3b1618"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a3183754384c4bfd6a920c82e5e3b1618">encoder</a></td></tr>
<tr class="memdesc:a3183754384c4bfd6a920c82e5e3b1618"><td class="mdescLeft">&#160;</td><td class="mdescRight">encoder value received from Slave_Driver <br/></td></tr>
<tr class="separator:a3183754384c4bfd6a920c82e5e3b1618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e5841164cc7b6e5c5501c12e5a797a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a65e5841164cc7b6e5c5501c12e5a797a"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a65e5841164cc7b6e5c5501c12e5a797a">Checksum_Error</a></td></tr>
<tr class="memdesc:a65e5841164cc7b6e5c5501c12e5a797a"><td class="mdescLeft">&#160;</td><td class="mdescRight">encoder transfer error 1 <br/></td></tr>
<tr class="separator:a65e5841164cc7b6e5c5501c12e5a797a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d30123857f1025903e8b6d8a30cff95"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1d30123857f1025903e8b6d8a30cff95"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a1d30123857f1025903e8b6d8a30cff95">Check_Sum_Master</a></td></tr>
<tr class="memdesc:a1d30123857f1025903e8b6d8a30cff95"><td class="mdescLeft">&#160;</td><td class="mdescRight">check sum computed here in master for encoder 1 <br/></td></tr>
<tr class="separator:a1d30123857f1025903e8b6d8a30cff95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7231699fbe88393c0d0ff693253f983a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7231699fbe88393c0d0ff693253f983a"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a7231699fbe88393c0d0ff693253f983a">Slave_Sum</a></td></tr>
<tr class="memdesc:a7231699fbe88393c0d0ff693253f983a"><td class="mdescLeft">&#160;</td><td class="mdescRight">check sum computed in slave for encoder 1 <br/></td></tr>
<tr class="separator:a7231699fbe88393c0d0ff693253f983a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113205aa4218d33663faeeede6b1e8a9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a113205aa4218d33663faeeede6b1e8a9"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a113205aa4218d33663faeeede6b1e8a9">dummy</a></td></tr>
<tr class="memdesc:a113205aa4218d33663faeeede6b1e8a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">counter used to delay so SPI works <br/></td></tr>
<tr class="separator:a113205aa4218d33663faeeede6b1e8a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e3e8189d315b4bf7415fe03f4035a10"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1e3e8189d315b4bf7415fe03f4035a10"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMaster.html#a1e3e8189d315b4bf7415fe03f4035a10">encoder_num</a></td></tr>
<tr class="memdesc:a1e3e8189d315b4bf7415fe03f4035a10"><td class="mdescLeft">&#160;</td><td class="mdescRight">integer to tell <a class="el" href="classMaster.html">Master</a> which encoder reading to get from Slave_Driver <br/></td></tr>
<tr class="separator:a1e3e8189d315b4bf7415fe03f4035a10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96b723e105507a410c9d0e56398174f0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a96b723e105507a410c9d0e56398174f0"></a>
union <a class="el" href="unionMaster_1_1packet1.html">Master::packet1</a>&#160;</td><td class="memItemRight" valign="bottom"><b>encoder_data</b></td></tr>
<tr class="separator:a96b723e105507a410c9d0e56398174f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="Master_8cpp.html">Master.cpp</a> is a class with methods for orchestrating and controlling the flow of data transfers on the SPI bus between a master device and a slave device. The data being transfered are new encoder positions from the two motors so that the <a class="el" href="classtask__PID.html">task_PID</a> class can keep track of where the motors are. The encoder values used in the PID calculations are stored in the main program and are updated in <a class="el" href="classMaster.html">Master</a> via pointers so that other objects can use them as well. </p>

<p>Definition at line <a class="el" href="Master_8h_source.html#l00031">31</a> of file <a class="el" href="Master_8h_source.html">Master.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a39589d526331f8b5abf9d405a5ea7fe7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Master::Master </td>
          <td>(</td>
          <td class="paramtype">base_text_serial *&#160;</td>
          <td class="paramname"><em>p_serial_port</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The constructor takes in a serial pointer and saves it locally and constructs a <a class="el" href="classMaster.html">Master</a> object. The object sets up SPI communications as a master. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_serial_port</td><td>serial object to allow printing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00025">25</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8cpp_source.html#l00053">CLEAR()</a>, and <a class="el" href="Master_8h_source.html#l00035">ptr_to_serial</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad85c13cad19e5600c6d2dff28aaa0a52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Master::CLEAR </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>motor_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clear is a method to clear a pair of counters located on another chip. Associated values in this class are also cleared </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">motor_num</td><td>pass in the value of which motor's encoder you would like to reset. motor_num=1 corresponds to command 3 and motor_num=2 sends command 4. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00053">53</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8h_source.html#l00041">Checksum_Error</a>, <a class="el" href="Master_8h_source.html#l00047">dummy</a>, <a class="el" href="Master_8h_source.html#l00039">encoder</a>, and <a class="el" href="Master_8h_source.html#l00035">ptr_to_serial</a>.</p>

<p>Referenced by <a class="el" href="Master_8cpp_source.html#l00025">Master()</a>, and <a class="el" href="Go__Home_8cpp_source.html#l00071">Go_Home::run()</a>.</p>

</div>
</div>
<a class="anchor" id="ac93f188774888e736f1bcb3345e6f208"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t Master::Get_Checksum_Error </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get_Checksum_Error gets the number of encoder transfer errors experienced </p>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00188">188</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8h_source.html#l00041">Checksum_Error</a>.</p>

</div>
</div>
<a class="anchor" id="af5baf3043c5c903472a906cd29643725"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Master::Get_Checksum_flag </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get_Checksum_flag is a method which returns true if the specified channel has experienced SPI transfer error and false if the channel's transfer went well. </p>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00196">196</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8h_source.html#l00037">error_flag</a>.</p>

</div>
</div>
<a class="anchor" id="ac6036259c4c2c8f4f3a11fd36ae23a6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t Master::Get_Encoder </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get_Encoder gets an encoder reading </p>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00181">181</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8h_source.html#l00039">encoder</a>.</p>

</div>
</div>
<a class="anchor" id="af507aba60a24105be4b58a441780fa28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Master::Initiate </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>encoder_select</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initiate communicates with another SPI device. Each encoder value is 32 bits or 4 bytes. The data transfer across the SPI bus happens one byte at a time. Each byte is stored in the union encoder_data. After the complete encoder value has been recieved, one more data transfer occurs to get the checksum from the slave device. The checksum for the received data is calculated and then compared to the checksum sent by the slave. If the checksums don't match, there has been a transfer error and the pointer to the encoder variable in PID_test is not updated. If the checksums match, then the pointer to the encoder variable gets updated with the new encoder position. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">encoder_select</td><td>Initiate must be fed which channel (motor) you desire encoder ticks from </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="Master_8cpp_source.html#l00110">110</a> of file <a class="el" href="Master_8cpp_source.html">Master.cpp</a>.</p>

<p>References <a class="el" href="Master_8h_source.html#l00043">Check_Sum_Master</a>, <a class="el" href="Master_8h_source.html#l00041">Checksum_Error</a>, <a class="el" href="Master_8h_source.html#l00047">dummy</a>, <a class="el" href="Master_8h_source.html#l00039">encoder</a>, <a class="el" href="Master_8h_source.html#l00049">encoder_num</a>, <a class="el" href="Master_8h_source.html#l00037">error_flag</a>, <a class="el" href="Master_8h_source.html#l00056">Master::packet1::parts</a>, <a class="el" href="Master_8h_source.html#l00045">Slave_Sum</a>, and <a class="el" href="Master_8h_source.html#l00054">Master::packet1::whole</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Master_8h_source.html">Master.h</a></li>
<li><a class="el" href="Master_8cpp_source.html">Master.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classMaster.html">Master</a></li>
    <li class="footer">Generated on Fri Sep 20 2013 16:30:28 for Polar Plotter Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
