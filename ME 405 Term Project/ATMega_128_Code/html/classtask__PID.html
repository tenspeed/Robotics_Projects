<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Polar Plotter Project: task_PID Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Polar Plotter Project
   &#160;<span id="projectnumber">5.0</span>
   </div>
   <div id="projectbrief">A 2D Polar Plotter for Drawing Straight Lines</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classtask__PID.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classtask__PID-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">task_PID Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="task__PID_8h_source.html">task_PID.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for task_PID:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classtask__PID.png" usemap="#task_PID_map" alt=""/>
  <map id="task_PID_map" name="task_PID_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a2e6f07f6c2d77478c31098a329c0e145"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a2e6f07f6c2d77478c31098a329c0e145">task_PID</a> (base_text_serial *p_serial_port, task_timer &amp;a_timer, time_stamp &amp;t_stamp, <a class="el" href="classMaster.html">Master</a> *master_object, <a class="el" href="classda__motor.html">da_motor</a> *motor_object, uint8_t which_Channel)</td></tr>
<tr class="separator:a2e6f07f6c2d77478c31098a329c0e145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f05dcd8d4efe5ab56610e02ea814b7b"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a6f05dcd8d4efe5ab56610e02ea814b7b">run</a> (char)</td></tr>
<tr class="separator:a6f05dcd8d4efe5ab56610e02ea814b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5c32248046e469d4a7d84bf5edef147"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#af5c32248046e469d4a7d84bf5edef147">go</a> (void)</td></tr>
<tr class="separator:af5c32248046e469d4a7d84bf5edef147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0a7b8ea266e97a883b58a8efc7812e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#af0a7b8ea266e97a883b58a8efc7812e4">stop</a> (void)</td></tr>
<tr class="separator:af0a7b8ea266e97a883b58a8efc7812e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39f37fa8c4514697bc6fe25fc6bd3498"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a39f37fa8c4514697bc6fe25fc6bd3498">CLEAR</a> (void)</td></tr>
<tr class="separator:a39f37fa8c4514697bc6fe25fc6bd3498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42c0117a576e25c264e2d62c6224ba6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a42c0117a576e25c264e2d62c6224ba6f">set_kp</a> (uint16_t kp_val)</td></tr>
<tr class="memdesc:a42c0117a576e25c264e2d62c6224ba6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">set K_p  <a href="#a42c0117a576e25c264e2d62c6224ba6f">More...</a><br/></td></tr>
<tr class="separator:a42c0117a576e25c264e2d62c6224ba6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b61639ae796073f60e452a19a692e4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a6b61639ae796073f60e452a19a692e4e">set_ki</a> (uint16_t ki_val)</td></tr>
<tr class="memdesc:a6b61639ae796073f60e452a19a692e4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">set K_i  <a href="#a6b61639ae796073f60e452a19a692e4e">More...</a><br/></td></tr>
<tr class="separator:a6b61639ae796073f60e452a19a692e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab086212c737d28bfa3af6f423eb4c54a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#ab086212c737d28bfa3af6f423eb4c54a">set_kd</a> (uint16_t kd_val)</td></tr>
<tr class="memdesc:ab086212c737d28bfa3af6f423eb4c54a"><td class="mdescLeft">&#160;</td><td class="mdescRight">set K_d  <a href="#ab086212c737d28bfa3af6f423eb4c54a">More...</a><br/></td></tr>
<tr class="separator:ab086212c737d28bfa3af6f423eb4c54a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4dbe31628ed6557e7703494006744e4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4dbe31628ed6557e7703494006744e4"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#ae4dbe31628ed6557e7703494006744e4">GET_Kp</a> (void)</td></tr>
<tr class="memdesc:ae4dbe31628ed6557e7703494006744e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">GET_Kp returns K_p. <br/></td></tr>
<tr class="separator:ae4dbe31628ed6557e7703494006744e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e065d324a3f296cf32297370a6026c4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e065d324a3f296cf32297370a6026c4"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a3e065d324a3f296cf32297370a6026c4">GET_Ki</a> (void)</td></tr>
<tr class="memdesc:a3e065d324a3f296cf32297370a6026c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">GET_Ki returns K_i. <br/></td></tr>
<tr class="separator:a3e065d324a3f296cf32297370a6026c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ed698383876a6968310bac2f70f78f9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5ed698383876a6968310bac2f70f78f9"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a5ed698383876a6968310bac2f70f78f9">GET_Kd</a> (void)</td></tr>
<tr class="memdesc:a5ed698383876a6968310bac2f70f78f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">GET_Kd returns K_d. <br/></td></tr>
<tr class="separator:a5ed698383876a6968310bac2f70f78f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5112215d3f09f07c8269724417b81232"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a5112215d3f09f07c8269724417b81232">set_setpoint</a> (int32_t s_pt)</td></tr>
<tr class="separator:a5112215d3f09f07c8269724417b81232"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3876eab56d800fa45d99b77d0fed40"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#abb3876eab56d800fa45d99b77d0fed40">GET_setpoint</a> (void)</td></tr>
<tr class="separator:abb3876eab56d800fa45d99b77d0fed40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3df066e30232d9262cffe00a209aa838"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a3df066e30232d9262cffe00a209aa838">Get_Encoder</a> (void)</td></tr>
<tr class="separator:a3df066e30232d9262cffe00a209aa838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2aa5643b7c4909d930dfb281a6eaa2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#abb2aa5643b7c4909d930dfb281a6eaa2">At_Seg_End</a> (void)</td></tr>
<tr class="separator:abb2aa5643b7c4909d930dfb281a6eaa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d79acbd155902dc1a10d1968f4c6050"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a5d79acbd155902dc1a10d1968f4c6050">Request_Home</a> (bool Nice_Shoes)</td></tr>
<tr class="separator:a5d79acbd155902dc1a10d1968f4c6050"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:abb3ce7591adb11f5dfaf185a60783079"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb3ce7591adb11f5dfaf185a60783079"></a>
base_text_serial *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#abb3ce7591adb11f5dfaf185a60783079">ptr_2_serial</a></td></tr>
<tr class="memdesc:abb3ce7591adb11f5dfaf185a60783079"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to a serial port object for printing purposes <br/></td></tr>
<tr class="separator:abb3ce7591adb11f5dfaf185a60783079"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed91ccc6f7ce2161f82911fafd35a2b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ed91ccc6f7ce2161f82911fafd35a2b"></a>
<a class="el" href="classMaster.html">Master</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a8ed91ccc6f7ce2161f82911fafd35a2b">func_READ_ENCODER</a></td></tr>
<tr class="memdesc:a8ed91ccc6f7ce2161f82911fafd35a2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer of type <a class="el" href="classMaster.html">Master</a> to an SPI object <br/></td></tr>
<tr class="separator:a8ed91ccc6f7ce2161f82911fafd35a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b21278136079ae694190e3f620c40cf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3b21278136079ae694190e3f620c40cf"></a>
<a class="el" href="classda__motor.html">da_motor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a3b21278136079ae694190e3f620c40cf">func_UPDATE_MOTOR</a></td></tr>
<tr class="memdesc:a3b21278136079ae694190e3f620c40cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer of type <a class="el" href="classda__motor.html">da_motor</a> to a motor object <br/></td></tr>
<tr class="separator:a3b21278136079ae694190e3f620c40cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db9c3da4224504ff3689ad2e16eeeab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4db9c3da4224504ff3689ad2e16eeeab"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a4db9c3da4224504ff3689ad2e16eeeab">giddyup</a></td></tr>
<tr class="memdesc:a4db9c3da4224504ff3689ad2e16eeeab"><td class="mdescLeft">&#160;</td><td class="mdescRight">tell motor to stop or go <br/></td></tr>
<tr class="separator:a4db9c3da4224504ff3689ad2e16eeeab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89911b07245fec5c4403f9f781f02788"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a89911b07245fec5c4403f9f781f02788"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a89911b07245fec5c4403f9f781f02788">homing</a></td></tr>
<tr class="memdesc:a89911b07245fec5c4403f9f781f02788"><td class="mdescLeft">&#160;</td><td class="mdescRight">homing allows task <a class="el" href="classGo__Home.html">Go_Home</a> to take control of motors <br/></td></tr>
<tr class="separator:a89911b07245fec5c4403f9f781f02788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabeac3edf9b1dc94f9e216ab99d89798"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aabeac3edf9b1dc94f9e216ab99d89798"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#aabeac3edf9b1dc94f9e216ab99d89798">motor_num</a></td></tr>
<tr class="memdesc:aabeac3edf9b1dc94f9e216ab99d89798"><td class="mdescLeft">&#160;</td><td class="mdescRight">a constant for each PID which controls which motor and encoder we use each time the PID is called <br/></td></tr>
<tr class="separator:aabeac3edf9b1dc94f9e216ab99d89798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aad6e651da5110ea8d64971272d611b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3aad6e651da5110ea8d64971272d611b"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a3aad6e651da5110ea8d64971272d611b">Checksum_Error_flag</a></td></tr>
<tr class="memdesc:a3aad6e651da5110ea8d64971272d611b"><td class="mdescLeft">&#160;</td><td class="mdescRight">A flag which indicates an SPI transfer error. <br/></td></tr>
<tr class="separator:a3aad6e651da5110ea8d64971272d611b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40708de7482ae8000f09de573757b763"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40708de7482ae8000f09de573757b763"></a>
volatile uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a40708de7482ae8000f09de573757b763">dummy</a></td></tr>
<tr class="memdesc:a40708de7482ae8000f09de573757b763"><td class="mdescLeft">&#160;</td><td class="mdescRight">stupid counting variable <br/></td></tr>
<tr class="separator:a40708de7482ae8000f09de573757b763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed9811d402294a2e97513d17603cbde"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ed9811d402294a2e97513d17603cbde"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a0ed9811d402294a2e97513d17603cbde">duty_cycle</a></td></tr>
<tr class="memdesc:a0ed9811d402294a2e97513d17603cbde"><td class="mdescLeft">&#160;</td><td class="mdescRight">name pretty well says it <br/></td></tr>
<tr class="separator:a0ed9811d402294a2e97513d17603cbde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a819c45f7b06d30c0c259434e519920df"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a819c45f7b06d30c0c259434e519920df"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a819c45f7b06d30c0c259434e519920df">K_p</a></td></tr>
<tr class="memdesc:a819c45f7b06d30c0c259434e519920df"><td class="mdescLeft">&#160;</td><td class="mdescRight">proportional gain <br/></td></tr>
<tr class="separator:a819c45f7b06d30c0c259434e519920df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdd29e3d3a304269e80c9a8008f23a27"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abdd29e3d3a304269e80c9a8008f23a27"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#abdd29e3d3a304269e80c9a8008f23a27">K_i</a></td></tr>
<tr class="memdesc:abdd29e3d3a304269e80c9a8008f23a27"><td class="mdescLeft">&#160;</td><td class="mdescRight">integral gain <br/></td></tr>
<tr class="separator:abdd29e3d3a304269e80c9a8008f23a27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aff3da930aa2bab02ecc480682653b7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6aff3da930aa2bab02ecc480682653b7"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a6aff3da930aa2bab02ecc480682653b7">K_d</a></td></tr>
<tr class="memdesc:a6aff3da930aa2bab02ecc480682653b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">differential gain <br/></td></tr>
<tr class="separator:a6aff3da930aa2bab02ecc480682653b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc82ee4ac88e8eae7d3ec15a980c07aa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abc82ee4ac88e8eae7d3ec15a980c07aa"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#abc82ee4ac88e8eae7d3ec15a980c07aa">prev_error</a></td></tr>
<tr class="memdesc:abc82ee4ac88e8eae7d3ec15a980c07aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">used for differential feedback <br/></td></tr>
<tr class="separator:abc82ee4ac88e8eae7d3ec15a980c07aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a788dfa787dc2ca005f59a33bc844ffc8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a788dfa787dc2ca005f59a33bc844ffc8"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a788dfa787dc2ca005f59a33bc844ffc8">E_sum_old</a></td></tr>
<tr class="memdesc:a788dfa787dc2ca005f59a33bc844ffc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">used for integral feedback <br/></td></tr>
<tr class="separator:a788dfa787dc2ca005f59a33bc844ffc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a174d94530691e307bcbbf39f33b67650"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a174d94530691e307bcbbf39f33b67650"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a174d94530691e307bcbbf39f33b67650">encoder</a></td></tr>
<tr class="memdesc:a174d94530691e307bcbbf39f33b67650"><td class="mdescLeft">&#160;</td><td class="mdescRight">encoder reading <br/></td></tr>
<tr class="separator:a174d94530691e307bcbbf39f33b67650"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40baac51f6290267531fd27550124543"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a40baac51f6290267531fd27550124543"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a40baac51f6290267531fd27550124543">Set_Point</a></td></tr>
<tr class="memdesc:a40baac51f6290267531fd27550124543"><td class="mdescLeft">&#160;</td><td class="mdescRight">the set point <br/></td></tr>
<tr class="separator:a40baac51f6290267531fd27550124543"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d046f072b58189aed139ea63d853fd4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d046f072b58189aed139ea63d853fd4"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtask__PID.html#a9d046f072b58189aed139ea63d853fd4">are_we_there_yet</a></td></tr>
<tr class="memdesc:a9d046f072b58189aed139ea63d853fd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">boolean set to true when desired position is reached <br/></td></tr>
<tr class="separator:a9d046f072b58189aed139ea63d853fd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="task__PID_8cpp.html">task_PID.cpp</a> is a class for a PID controller. <a class="el" href="classtask__PID.html">task_PID</a> is able to read the current encoder position on a motor, calculate the proportional, integral, and differential gains, and update the motor's duty cycle based on the final gain value. It can also manipulate certain flags via inline functions to trigger actions, such as telling a motor to go or stop, in other objects. </p>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00022">22</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a2e6f07f6c2d77478c31098a329c0e145"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">task_PID::task_PID </td>
          <td>(</td>
          <td class="paramtype">base_text_serial *&#160;</td>
          <td class="paramname"><em>p_serial_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">task_timer &amp;&#160;</td>
          <td class="paramname"><em>a_timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_stamp &amp;&#160;</td>
          <td class="paramname"><em>t_stamp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classMaster.html">Master</a> *&#160;</td>
          <td class="paramname"><em>master_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classda__motor.html">da_motor</a> *&#160;</td>
          <td class="paramname"><em>motor_object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>Which_Channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The constructor <a class="el" href="classtask__PID.html">task_PID</a> creates a new PID object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_serial_port</td><td>Allows screen printouts </td></tr>
    <tr><td class="paramname">a_timer,:</td><td>Assists in sceduling </td></tr>
    <tr><td class="paramname">t_stamp,:</td><td>Assists in sceduling </td></tr>
    <tr><td class="paramname">master_object</td><td>An SPI master object </td></tr>
    <tr><td class="paramname">motor_object,:</td><td>A motor object </td></tr>
    <tr><td class="paramname">Which_Channel,:</td><td>Gives the newborn PID its motor assignment. For life.</td></tr>
  </table>
  </dd>
</dl>
<p>The constructor <a class="el" href="classtask__PID.html">task_PID</a> creates a new Proportional Integral Differential (PID) controller object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_serial_port</td><td>Allows screen printouts </td></tr>
    <tr><td class="paramname">a_timer,:</td><td>Assists in sceduling </td></tr>
    <tr><td class="paramname">t_stamp,:</td><td>Assists in sceduling </td></tr>
    <tr><td class="paramname">master_object</td><td>An SPI master object </td></tr>
    <tr><td class="paramname">motor_object,:</td><td>A motor object </td></tr>
    <tr><td class="paramname">Which_Channel,:</td><td>Gives the newborn PID its motor assignment. For life. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8cpp_source.html#l00040">40</a> of file <a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>, <a class="el" href="task__PID_8h_source.html#l00042">duty_cycle</a>, <a class="el" href="task__PID_8h_source.html#l00052">E_sum_old</a>, <a class="el" href="task__PID_8h_source.html#l00054">encoder</a>, <a class="el" href="task__PID_8h_source.html#l00028">func_READ_ENCODER</a>, <a class="el" href="task__PID_8h_source.html#l00030">func_UPDATE_MOTOR</a>, <a class="el" href="task__PID_8h_source.html#l00032">giddyup</a>, <a class="el" href="task__PID_8h_source.html#l00034">homing</a>, <a class="el" href="task__PID_8h_source.html#l00048">K_d</a>, <a class="el" href="task__PID_8h_source.html#l00046">K_i</a>, <a class="el" href="task__PID_8h_source.html#l00044">K_p</a>, <a class="el" href="task__PID_8h_source.html#l00036">motor_num</a>, <a class="el" href="task__PID_8h_source.html#l00050">prev_error</a>, <a class="el" href="task__PID_8h_source.html#l00026">ptr_2_serial</a>, and <a class="el" href="task__PID_8h_source.html#l00056">Set_Point</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="abb2aa5643b7c4909d930dfb281a6eaa2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool task_PID::At_Seg_End </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>check if we're at the end of the segment </p>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00117">117</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>.</p>

<p>Referenced by <a class="el" href="point_8cpp_source.html#l00056">point::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a39f37fa8c4514697bc6fe25fc6bd3498"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::CLEAR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>CLEAR resets PID control variables </p>

<p>Definition at line <a class="el" href="task__PID_8cpp_source.html#l00192">192</a> of file <a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00042">duty_cycle</a>, <a class="el" href="task__PID_8h_source.html#l00052">E_sum_old</a>, <a class="el" href="task__PID_8h_source.html#l00054">encoder</a>, and <a class="el" href="task__PID_8h_source.html#l00050">prev_error</a>.</p>

<p>Referenced by <a class="el" href="Go__Home_8cpp_source.html#l00071">Go_Home::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a3df066e30232d9262cffe00a209aa838"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t task_PID::Get_Encoder </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get_Encoder gets an encoder reading </p>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00113">113</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00054">encoder</a>.</p>

<p>Referenced by <a class="el" href="task__PID_8cpp_source.html#l00072">run()</a>.</p>

</div>
</div>
<a class="anchor" id="abb3876eab56d800fa45d99b77d0fed40"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int32_t task_PID::GET_setpoint </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>GET_setpoint gets the current setpoint so it can be printed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Set_Point</td><td>the set point you desire </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00109">109</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00056">Set_Point</a>.</p>

</div>
</div>
<a class="anchor" id="af5c32248046e469d4a7d84bf5edef147"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::go </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>go enables motor control </p>

<p>Definition at line <a class="el" href="task__PID_8cpp_source.html#l00177">177</a> of file <a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>, and <a class="el" href="task__PID_8h_source.html#l00032">giddyup</a>.</p>

<p>Referenced by <a class="el" href="point_8cpp_source.html#l00056">point::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a5d79acbd155902dc1a10d1968f4c6050"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::Request_Home </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>Nice_Shoes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>disable PID so homing can occur </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">Nice_Shoes</td><td>set this true to disable PID for homing </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00122">122</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00034">homing</a>.</p>

<p>Referenced by <a class="el" href="Go__Home_8cpp_source.html#l00071">Go_Home::run()</a>, and <a class="el" href="task__read_8cpp_source.html#l00089">task_read::run()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f05dcd8d4efe5ab56610e02ea814b7b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char task_PID::run </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>run is a 2 state PID controller. State 0 is an idle state which wits for the go bool giddyup to be true. State 1 gets an encoder count, does necessary feedback calculations and sets motor duty cycle. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td>is a state variable controlled by STL_task</td></tr>
  </table>
  </dd>
</dl>
<p>run is a two state PID controller. The first state is simply a non moving state which checks to see if movement has been requested. State two incorporates proportional, integral and differential feedback into a control loop which updates the duty cycle of a motor (one motor per PID object). </p>
<p>State 0 is a non moving state. It doesn't move.</p>
<p>State 1 is the PID task. It gets a current encoder reading (ensuring no transfer error) and then calculates new duty and sets the duty cycle.</p>

<p>Definition at line <a class="el" href="task__PID_8cpp_source.html#l00072">72</a> of file <a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>, <a class="el" href="task__PID_8h_source.html#l00038">Checksum_Error_flag</a>, <a class="el" href="task__PID_8h_source.html#l00040">dummy</a>, <a class="el" href="task__PID_8h_source.html#l00042">duty_cycle</a>, <a class="el" href="task__PID_8h_source.html#l00052">E_sum_old</a>, <a class="el" href="task__PID_8h_source.html#l00054">encoder</a>, <a class="el" href="task__PID_8h_source.html#l00028">func_READ_ENCODER</a>, <a class="el" href="task__PID_8h_source.html#l00030">func_UPDATE_MOTOR</a>, <a class="el" href="task__PID_8h_source.html#l00113">Get_Encoder()</a>, <a class="el" href="task__PID_8h_source.html#l00032">giddyup</a>, <a class="el" href="task__PID_8h_source.html#l00034">homing</a>, <a class="el" href="task__PID_8h_source.html#l00046">K_i</a>, <a class="el" href="task__PID_8h_source.html#l00044">K_p</a>, <a class="el" href="task__PID_8h_source.html#l00036">motor_num</a>, <a class="el" href="task__PID_8h_source.html#l00050">prev_error</a>, <a class="el" href="da__motor_8cpp_source.html#l00076">da_motor::set_mode()</a>, <a class="el" href="task__PID_8h_source.html#l00056">Set_Point</a>, and <a class="el" href="da__motor_8cpp_source.html#l00191">da_motor::update_duty_cycle()</a>.</p>

</div>
</div>
<a class="anchor" id="ab086212c737d28bfa3af6f423eb4c54a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::set_kd </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>kd_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set K_d </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kd_val,:</td><td>the value you wish to set the gain to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00091">91</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00048">K_d</a>.</p>

</div>
</div>
<a class="anchor" id="a6b61639ae796073f60e452a19a692e4e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::set_ki </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ki_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set K_i </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ki_val,:</td><td>the value you wish to set the gain to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00089">89</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00046">K_i</a>.</p>

</div>
</div>
<a class="anchor" id="a42c0117a576e25c264e2d62c6224ba6f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::set_kp </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>kp_val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>set K_p </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">kp_val,:</td><td>the value you wish to set the gain to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00087">87</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00044">K_p</a>.</p>

</div>
</div>
<a class="anchor" id="a5112215d3f09f07c8269724417b81232"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::set_setpoint </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>s_pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>set_setpoint sets the setpoint </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_pt</td><td>the set point you desire </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="task__PID_8h_source.html#l00104">104</a> of file <a class="el" href="task__PID_8h_source.html">task_PID.h</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>, and <a class="el" href="task__PID_8h_source.html#l00056">Set_Point</a>.</p>

<p>Referenced by <a class="el" href="point_8cpp_source.html#l00056">point::run()</a>.</p>

</div>
</div>
<a class="anchor" id="af0a7b8ea266e97a883b58a8efc7812e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_PID::stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>stop disables motor control (stops the motors) </p>

<p>Definition at line <a class="el" href="task__PID_8cpp_source.html#l00185">185</a> of file <a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a>.</p>

<p>References <a class="el" href="task__PID_8h_source.html#l00058">are_we_there_yet</a>, and <a class="el" href="task__PID_8h_source.html#l00032">giddyup</a>.</p>

<p>Referenced by <a class="el" href="point_8cpp_source.html#l00056">point::run()</a>, <a class="el" href="task__lines_8cpp_source.html#l00081">task_lines::run()</a>, and <a class="el" href="task__read_8cpp_source.html#l00089">task_read::run()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="task__PID_8h_source.html">task_PID.h</a></li>
<li><a class="el" href="task__PID_8cpp_source.html">task_PID.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classtask__PID.html">task_PID</a></li>
    <li class="footer">Generated on Fri Sep 20 2013 16:30:28 for Polar Plotter Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
